{"version":3,"file":"bootstrap-form-error.js","sources":["../../src/js/form-error.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Form Error (v0.0.1): form-error.js\n * Licensed under MIT (https://github.com/iqbalfn/bootstrap-form-error/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'formerror'\nconst VERSION            = '0.0.1'\nconst DATA_KEY           = 'bs.formerror'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Default = {}\n\nconst DefaultType = {}\n\nconst Event = {\n    INPUT_DATA_API      : `input${EVENT_KEY}${DATA_API_KEY}`,\n    INVALID_DATA_API    : `invalid${EVENT_KEY}${DATA_API_KEY}`,\n    SUBMIT_DATA_API     : `submit${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {}\n\nconst Selector = {}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass FormError {\n    constructor(element, config) {\n        this._element   = element\n        this._controls  = [].slice.call(element.elements, 0);\n\n        this._wasValidated = false\n\n        this._addControlListener()\n        this._addFormListener()\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    static get Default() {\n        return Default\n    }\n\n    // Public\n\n\n    // Private\n\n    _addControlListener(){\n        this._controls.forEach(e => {\n            let $e = $(e)\n            let feedback = $e.next('.invalid-feedback').get(0)\n\n            if(!feedback){\n                let parent = $e.closest('.form-group');\n                feedback = parent.find('.invalid-feedback').get(0)\n            }\n\n            if(feedback)\n                $e.data('feedback', feedback)\n\n            $e.on(Event.INVALID_DATA_API, event => {\n                if(this._wasValidated && e.validationMessage && $e.data('feedback'))\n                    $e.data('feedback').innerText = e.validationMessage\n            })\n\n            $e.on(Event.INPUT_DATA_API, event => {\n                if(this._wasValidated && e.validationMessage && $e.data('feedback'))\n                    $e.data('feedback').innerText = e.validationMessage\n            })\n        })\n    }\n\n    _addFormListener(){\n        this._element.setAttribute('novalidate', '')\n\n        $(this._element).on(Event.SUBMIT_DATA_API, e => {\n            if(!this._element.checkValidity()){\n                e.preventDefault()\n                e.stopPropagation()\n            }\n\n            this._controls.forEach(c => {\n                if(!c.checkValidity()){\n                    if($(c).data('feedback'))\n                        $(c).data('feedback').innerText = c.validationMessage\n                }\n            })\n\n            this._element.classList.add('was-validated')\n            this._wasValidated = true\n        })\n    }\n\n    // Static\n\n    static _jQueryInterface(config, relatedTarget) {\n        return this.each(function () {\n            let data = $(this).data(DATA_KEY)\n\n            if (!data) {\n                data = new FormError(this)\n                $(this).data(DATA_KEY, data)\n            }\n        })\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = FormError._jQueryInterface\n$.fn[NAME].Constructor = FormError\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return FormError._jQueryInterface\n}\n\nexport default FormError"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Default","Event","INPUT_DATA_API","INVALID_DATA_API","SUBMIT_DATA_API","FormError","element","config","_element","_controls","slice","call","elements","_wasValidated","_addControlListener","_addFormListener","forEach","e","$e","feedback","next","get","parent","closest","find","data","on","event","validationMessage","innerText","setAttribute","checkValidity","preventDefault","stopPropagation","c","classList","add","_jQueryInterface","relatedTarget","each","Constructor","noConflict"],"mappings":"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"}