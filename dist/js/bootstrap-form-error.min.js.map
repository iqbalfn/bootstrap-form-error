{"version":3,"sources":["../../src/js/form-error.js"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","Default","Event","INPUT_DATA_API","INVALID_DATA_API","SUBMIT_DATA_API","FormError","element","config","this","_element","_controls","slice","call","elements","_wasValidated","_addControlListener","_addFormListener","_this","forEach","e","$e","feedback","next","get","data","on","event","validationMessage","innerText","_this2","setAttribute","checkValidity","preventDefault","stopPropagation","c","classList","add","_jQueryInterface","relatedTarget","each","Constructor","noConflict"],"mappings":";;;;;6cAeA,IAAMA,EAAqB,YAErBC,EAAqB,eACrBC,EAAS,IAAgBD,EACzBE,EAAqB,YACrBC,EAAqBC,EAAEC,GAAGN,GAE1BO,EAAU,GAIVC,EAAQ,CACVC,eAAc,QAAgBP,EAAYC,EAC1CO,iBAAgB,UAAgBR,EAAYC,EAC5CQ,gBAAe,SAAgBT,EAAYC,GAazCS,aACF,SAAAA,EAAYC,EAASC,GACjBC,KAAKC,SAAaH,EAClBE,KAAKE,UAAa,GAAGC,MAAMC,KAAKN,EAAQO,SAAU,GAElDL,KAAKM,eAAgB,EAErBN,KAAKO,sBACLP,KAAKQ,8CAkBTD,oBAAA,WAAqB,IAAAE,EAAAT,KACjBA,KAAKE,UAAUQ,QAAQ,SAAAC,GACnB,IAAIC,EAAKtB,EAAEqB,GACPE,EAAWD,EAAGE,KAAK,qBAAqBC,IAAI,GAC7CF,GACCD,EAAGI,KAAK,WAAYH,GAExBD,EAAGK,GAAGxB,EAAME,iBAAkB,SAAAuB,GACvBT,EAAKH,eAAiBK,EAAEQ,oBACvBP,EAAGI,KAAK,YAAYI,UAAYT,EAAEQ,qBAG1CP,EAAGK,GAAGxB,EAAMC,eAAgB,SAAAwB,GACrBT,EAAKH,eAAiBK,EAAEQ,oBACvBP,EAAGI,KAAK,YAAYI,UAAYT,EAAEQ,0BAKlDX,iBAAA,WAAkB,IAAAa,EAAArB,KACdA,KAAKC,SAASqB,aAAa,aAAc,IAEzChC,EAAEU,KAAKC,UAAUgB,GAAGxB,EAAMG,gBAAiB,SAAAe,GACnCU,EAAKpB,SAASsB,kBACdZ,EAAEa,iBACFb,EAAEc,mBAGNJ,EAAKnB,UAAUQ,QAAQ,SAAAgB,GACfA,EAAEH,kBACFjC,EAAEoC,GAAGV,KAAK,YAAYI,UAAYM,EAAEP,qBAG5CE,EAAKpB,SAAS0B,UAAUC,IAAI,iBAC5BP,EAAKf,eAAgB,OAMtBuB,iBAAP,SAAwB9B,EAAQ+B,GAC5B,OAAO9B,KAAK+B,KAAK,WACb,IAAIf,EAAO1B,EAAEU,MAAMgB,KAAK9B,GAEnB8B,IACDA,EAAO,IAAInB,EAAUG,MACrBV,EAAEU,MAAMgB,KAAK9B,EAAU8B,4FA1D/B,MAxCmB,wCA4CnB,OAAOxB,WAkEfF,EAAEC,GAAGN,GAAQY,EAAUgC,iBACvBvC,EAAEC,GAAGN,GAAM+C,YAAcnC,EACzBP,EAAEC,GAAGN,GAAMgD,WAAa,WAEtB,OADA3C,EAAEC,GAAGN,GAAQI,EACNQ,EAAUgC","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Form Error (v0.0.1): form-error.js\n * Licensed under MIT (https://github.com/iqbalfn/bootstrap-form-error/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'formerror'\nconst VERSION            = '0.0.1'\nconst DATA_KEY           = 'bs.formerror'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Default = {}\n\nconst DefaultType = {}\n\nconst Event = {\n    INPUT_DATA_API      : `input${EVENT_KEY}${DATA_API_KEY}`,\n    INVALID_DATA_API    : `invalid${EVENT_KEY}${DATA_API_KEY}`,\n    SUBMIT_DATA_API     : `submit${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {}\n\nconst Selector = {}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass FormError {\n    constructor(element, config) {\n        this._element   = element\n        this._controls  = [].slice.call(element.elements, 0);\n\n        this._wasValidated = false\n\n        this._addControlListener()\n        this._addFormListener()\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    static get Default() {\n        return Default\n    }\n\n    // Public\n\n\n    // Private\n\n    _addControlListener(){\n        this._controls.forEach(e => {\n            let $e = $(e)\n            let feedback = $e.next('.invalid-feedback').get(0)\n            if(feedback)\n                $e.data('feedback', feedback)\n\n            $e.on(Event.INVALID_DATA_API, event => {\n                if(this._wasValidated && e.validationMessage)\n                    $e.data('feedback').innerText = e.validationMessage\n            })\n\n            $e.on(Event.INPUT_DATA_API, event => {\n                if(this._wasValidated && e.validationMessage)\n                    $e.data('feedback').innerText = e.validationMessage\n            })\n        })\n    }\n\n    _addFormListener(){\n        this._element.setAttribute('novalidate', '')\n\n        $(this._element).on(Event.SUBMIT_DATA_API, e => {\n            if(!this._element.checkValidity()){\n                e.preventDefault()\n                e.stopPropagation()\n            }\n\n            this._controls.forEach(c => {\n                if(!c.checkValidity())\n                    $(c).data('feedback').innerText = c.validationMessage\n            })\n\n            this._element.classList.add('was-validated')\n            this._wasValidated = true\n        })\n    }\n\n    // Static\n\n    static _jQueryInterface(config, relatedTarget) {\n        return this.each(function () {\n            let data = $(this).data(DATA_KEY)\n\n            if (!data) {\n                data = new FormError(this)\n                $(this).data(DATA_KEY, data)\n            }\n        })\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = FormError._jQueryInterface\n$.fn[NAME].Constructor = FormError\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return FormError._jQueryInterface\n}\n\nexport default FormError"]}